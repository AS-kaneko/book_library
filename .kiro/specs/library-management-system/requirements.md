# 要件定義書

## はじめに

本文書は、図書管理システムの要件を定義します。このシステムは、社員20名が約30冊の書籍を共有・管理するための小規模な図書管理システムです。書籍の貸出・返却、在庫管理、貸出履歴の追跡などの基本的な図書館機能を提供します。

## 用語集

- **図書システム**: 社内の書籍を管理するためのアプリケーション
- **社員**: このシステムを使う会社のメンバー
- **書籍**: 管理する本や資料
- **貸出**: 本を借りること
- **返却**: 借りた本を返すこと
- **在庫状態**: 本が借りられる状態か、誰かが借りている状態か

## 要件

### 要件1: 書籍管理

**やりたいこと:** 管理者が書籍の情報を登録・更新・削除できるようにする

#### できること

1. 書籍のタイトル、著者、ISBN、登録日を保存できる
2. 新しい書籍を追加できる
3. 書籍を追加するとき、バーコードスキャナーでISBNを読み取れる
4. ISBNをスキャンしたら、国立国会図書館APIから書籍情報（タイトル、著者）を自動取得できる
5. 自動取得した書籍情報を編集してから登録できる
6. 登録済みの書籍情報を編集できる
7. 不要になった書籍を削除できる
8. 誰かが借りている書籍は削除できない（エラーメッセージを表示）

### 要件2: 社員管理

**やりたいこと:** 管理者が社員情報を登録・管理して、誰が本を借りているか把握できるようにする

#### できること

1. 社員の名前、社員ID、メールアドレス、会員バーコードを保存できる
2. 新しい社員を登録できる
3. 社員を登録すると、会員バーコードが自動で作られる
4. 会員バーコードをPNG画像として保存できる（印刷して配布可能）
5. 登録済みの社員情報を編集できる
6. 退職した社員などを削除できる
7. 本を借りている社員は削除できない（エラーメッセージを表示）

### 要件3: 書籍貸出

**やりたいこと:** 社員が借りたい本を簡単に借りられるようにする

#### できること

1. 借りられる状態の本を貸し出せる
2. 会員バーコードをスキャンして社員を特定できる
3. 本のISBNバーコードをスキャンして貸出処理ができる
4. 貸出日と誰が借りたかを自動で記録する
5. すでに誰かが借りている本は貸し出せない（エラーメッセージを表示）
6. 1人が同時に借りられるのは3冊まで
7. すでに3冊借りている人は追加で借りられない（エラーメッセージを表示）

### 要件4: 書籍返却

**やりたいこと:** 借りた本を簡単に返却できるようにして、他の人も借りられるようにする

#### できること

1. 本のISBNバーコードをスキャンして返却処理ができる
2. 返却日を自動で記録する
3. 返却した本を「借りられる状態」に戻す
4. 借りていない本を返却しようとするとエラーメッセージを表示する
5. 返却後も貸出履歴は残る（誰がいつ借りたか確認できる）

### 要件5: 書籍検索と一覧表示

**やりたいこと:** 読みたい本を素早く見つけられるようにする

#### できること

1. すべての本の一覧を見られる
2. タイトルや著者名で本を検索できる
3. 各本が「借りられる」か「貸出中」かわかる
4. 貸出中の本は、誰が借りているか表示される
5. 「今借りられる本だけ」を絞り込んで表示できる

### 要件6: 貸出履歴管理

**やりたいこと:** 本の利用状況を確認できるようにする

#### できること

1. すべての貸出履歴を保存する
2. 特定の本の貸出履歴を見られる（この本は誰が借りたか）
3. 特定の社員の貸出履歴を見られる（この人は何を借りたか）
4. 履歴には本のタイトル、借りた人、貸出日、返却日が表示される
5. 今借りられている本の一覧を見られる

### 要件7: データの保存

**やりたいこと:** アプリを閉じてもデータが消えないようにする

#### できること

1. すべての書籍情報をファイルに保存する
2. すべての社員情報をファイルに保存する
3. すべての貸出履歴をファイルに保存する
4. アプリを起動したとき、保存されたデータを自動で読み込む
5. データの保存に失敗したら、エラーメッセージを表示する
